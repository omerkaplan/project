<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Pelican changelog v.1.01: We have dark mode! | /project</title>
  <meta name="description" content="Projects, blog posts and things by Omer Kaplan" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">



  <!-- css -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/theme/css/custom.css">
  <link rel="stylesheet" href="/static/css/pygments.css">



  <!--favicons-->
  <link rel="shortcut icon" type="image/x-icon" href="/theme/favicon/favicon.ico">

  <!-- bootstraping -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"
    integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm"
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/bfad879265.js" crossorigin="anonymous"></script>


    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://slashproject.co/posts/2025/pelican-changelog-v101-we-have-dark-mode/">
    <meta property="og:title" content="Pelican changelog v.1.01: We have dark mode!">
    <meta property="og:description" content="This is a summary of the post so I can see it on the homepage">
    <meta property="og:image" content="imagefile">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://slashproject.co/posts/2025/pelican-changelog-v101-we-have-dark-mode/">
    <meta property="twitter:title" content="Pelican changelog v.1.01: We have dark mode!">
    <meta property="twitter:description" content="This is a summary of the post so I can see it on the homepage">
    <meta property="twitter:image" content="imagefile">

  <!-- Including Google Analytics. This is done in head  since we need to calculate post reading time

  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-101975344-1', 'auto');
    ga('send', 'pageview');
  </script>

-->
  <!-- Dark mode initial javascript  -->
  <script>
    // the goal of this script is to set the initial theme based on user preference or saved theme. At the end of the document we have a script that toggles the theme.
    (function () {
      const savedTheme = localStorage.getItem("theme"); // Get saved theme from localStorage
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      const theme = savedTheme || (prefersDark ? "dark" : "light");
      document.documentElement.setAttribute("data-theme", theme); // Set the initial theme to dark mode if saved or preferred
    })();
  </script>
  <!-- end of themeing javascript --></head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col p-0">
<nav class="navbar navbar-expand-lg">
  <a class="navbar-brand" href="/">/project</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">

    <ul class="navbar-nav mr-auto">

      <li class="nav-item"><a class="nav-link nav-all" href="/">/all</a></li>

      <li class="nav-item">        <a class="nav-link nav-blog" href="/category/blog"><span class="">/blog_posts</span></a>
      </li>

<li class="nav-item active">        <a class="nav-link nav-projects" href="/category/project">/projects</a>
      </li>

      <li class="nav-item">
        <a class="nav-link nav-about" href="/about">/about-me</a>
      </li>

      <li class="nav-item">
        <a class="nav-link nav-rss" href="/feeds/all.atom.xml">/rss</a>
      </li>

      <li class="nav-item">
        <a class="nav-link href nav-all=" #" id="theme-toggle">/theme/dark</a>
      </li>
    </ul>

    <span class="navbar-text accent-green mr-5">made with<i class="fas fa-mug-hot mr-2 ml-2 accent-orange"></i>by <u><a
          class="accent-green" href="https://www.linkedin.com/in/omerkaplan/">Omer Kaplan</a></u></span>
  </div>
</nav>      </div>
    </div>
    <div class="row mt-3">
<div class="col-lg-12 col-md-12">
  <div class="row" id="content_row">
    <div id="margin-from-left" class="col-xl-2 col-lg-1 col-md-12"></div>
    <div id="content" class="col-xl-7 col-lg-9 col-md-12">
      <h1 class="mt-3">Pelican changelog v.1.01: We have dark mode!</h1>
      <small class="mr-2"><i class="far fa-calendar-alt mr-2"></i>20 July, 2025</small>
      <small class="mr-2"><i class="far fa-clock mr-2"></i>3 minutes read</small>
<small class="mr-2"><i class="fas fa-laptop-code mr-2"></i>Python, Pelican</small>      <div class="pt-5" id="article-content">
        <p>Designing a static site with a clean, modern look has always been a goal of mine ‚Äî but in 2025, one feature feels almost mandatory: <strong>dark mode</strong>.</p>
<p>While Pelican doesn‚Äôt come with dark mode out of the box, it‚Äôs flexible enough to support it. This post documents how I added theme switching to my personal site, the gotchas I hit along the way, and the final architecture that keeps everything tidy.</p>
<hr>
<h3>üåí Step 1: Choose a CSS Strategy</h3>
<p>My project already had a <code>custom.scss</code> file (converted to <code>custom.css</code> via a Sass build step). That made it easy to layer in a dark theme using CSS variables.</p>
<p>We started by defining <strong>base variables</strong> in <code>:root</code> for light mode:</p>
<div class="highlight"><pre><span></span><code><span class="nd">:root</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">--bg</span><span class="nd">:</span><span class="w"> </span><span class="nn">#fdfdfd</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--text</span><span class="nd">:</span><span class="w"> </span><span class="nn">#202124</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-purple</span><span class="nd">:</span><span class="w"> </span><span class="nn">#a277ff</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-orange</span><span class="nd">:</span><span class="w"> </span><span class="nn">#ffca85</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-green</span><span class="nd">:</span><span class="w"> </span><span class="nn">#61ffca</span><span class="o">;</span>
<span class="p">}</span>
</code></pre></div>

<p>Then we added an alternate theme using a <code>[data-theme="dark"]</code> attribute:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">--bg</span><span class="nd">:</span><span class="w"> </span><span class="nn">#1e1e1e</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--text</span><span class="nd">:</span><span class="w"> </span><span class="nn">#c9d1d9</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-purple</span><span class="nd">:</span><span class="w"> </span><span class="nn">#c792ea</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-orange</span><span class="nd">:</span><span class="w"> </span><span class="nn">#ffcb6b</span><span class="o">;</span>
<span class="w">  </span><span class="nt">--accent-green</span><span class="nd">:</span><span class="w"> </span><span class="nn">#c3e88d</span><span class="o">;</span>
<span class="p">}</span>
</code></pre></div>

<p>This approach makes it dead simple to toggle themes ‚Äî all you need to do is add or remove the <code>data-theme="dark"</code> attribute on the <code>&lt;html&gt;</code> element.</p>
<hr>
<h3>üß† Step 2: Decide Where and How to Toggle</h3>
<p>To keep things clean and unobtrusive, we split the JavaScript into two parts:</p>
<ol>
<li><strong>Early script (in <code>&lt;head&gt;</code>)</strong>: Checks the user‚Äôs saved preference or system setting and applies dark mode <em>before</em> the page renders, to avoid a ‚Äúflash of white.‚Äù</li>
<li><strong>Interactive script (in <code>&lt;body&gt;</code>)</strong>: Handles the toggle button behavior after the DOM loads.</li>
</ol>
<p>Here‚Äôs a simplified version of the early script:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">matchMedia</span><span class="p">(</span><span class="s2">&quot;(prefers-color-scheme: dark)&quot;</span><span class="p">).</span><span class="nx">matches</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;data-theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;data-theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>And the interactive script:</p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">toggle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;theme-toggle&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">toggle</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">isDark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-theme&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isDark</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&quot;data-theme&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;light&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;data-theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<p>We later moved this code into a dedicated <code>theme.js</code> file, placed it in the content directory, and used Pelican‚Äôs <code>STATIC_PATHS</code> setting to make sure it was copied correctly.</p>
<hr>
<h3>‚ö†Ô∏è Gotchas and Debugging</h3>
<p>Several small things tripped us up along the way:</p>
<ul>
<li><strong>Pelican doesn‚Äôt auto-copy static JS or CSS files</strong> unless you explicitly include them in <code>STATIC_PATHS</code>. Double-check that your theme or content folder handles this properly.</li>
<li><strong>Running multiple <code>pelican --listen</code> instances</strong> caused bizarre bugs, from broken routing to infinite rebuilds. Be sure to kill old processes (<code>lsof -i :8000</code> is your friend).</li>
<li><strong>Placing JS in <code>&lt;head&gt;</code></strong> is fine, but be sure to split logic between "early theming" and "event handling" to avoid race conditions with the DOM.</li>
</ul>
<hr>
<h3>‚ú® Bonus Touches</h3>
<p>Once it was working, we added subtle polish:</p>
<ul>
<li><strong>Smooth transitions</strong> when switching themes via <code>transition: background-color 0.3s ease, color 0.3s ease;</code></li>
<li><strong>Keyboard shortcuts</strong> (<code>Shift+D</code> to toggle)</li>
<li><strong>Custom hover effects</strong> for navbar links, varying by category (e.g. <code>/projects</code> in red, <code>/about-me</code> in blue)</li>
</ul>
<hr>
<h3>‚úÖ Final Thoughts</h3>
<p>Implementing dark mode wasn‚Äôt just a cosmetic change ‚Äî it made me rethink my site‚Äôs design from a systems perspective. Using CSS variables, minimal JavaScript, and a clear separation of responsibilities made the codebase cleaner and easier to maintain.</p>
<p>It‚Äôs one of those small features that adds polish, and now I get a little joy every time I toggle that theme switch üòé</p>
      </div>
      <hr class="mt-5">
    </div>


    <div class="col-xl-2 col-lg-1" id="related_posts_col">
      <!--
 
  </div>
   -->
    </div> 
    </div>
  </div>
  <div class="row mt-5">
  </div>
  </div>

<!-- Dark mode toggle javascript -->
<script src="/static/js/theme.js"></script></body>

</html>